<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <script src='https://code.jquery.com/jquery-3.3.1.min.js' integrity='sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8='
        crossorigin='anonymous'></script>
</head>

<body>
    <div class="container">


        <div class="row">
            <div class="col-lg-12">

                <div class="card">
                    <div class="card-header h1">
                        Survey Questions
                    </div>

                    <div class="card-body">
                        <form role="form">
                            <div class="form-group">
                                <div class="h3">About You</div>
                                <label for="name">Name</label>
                                <input type="text" class="form-control" id="name">
                            </div>
                            <div class="form-group">
                                <label for="photo_link">Link to Photo Image</label>
                                <input type="text" class="form-control" id="photo_link">
                            </div>
                            <div class="form-group">
                                <label class="mr-sm-2" for="inlineFormCustomSelectPref"><span class="h4">Question 1
                                    </span> <br/> Likes to talk about feelings and emotions</label>
                                <select class="custom-select mr-sm-2 scores" id="inlineFormCustomSelectPref">
                                    <option selected>Choose...</option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree) </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="mr-sm-2" for="inlineFormCustomSelectPref"><span class="h4">Question 2
                                    </span> <br/>Loves to travel to exotic places</label>
                                <select class="custom-select mr-sm-2 scores" id="inlineFormCustomSelectPref">
                                    <option selected>Choose...</option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree) </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="mr-sm-2" for="inlineFormCustomSelectPref"><span class="h4">Question 3
                                    </span> <br/> Loves a good party</label>
                                <select class="custom-select mr-sm-2 scores" id="inlineFormCustomSelectPref">
                                    <option selected>Choose...</option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree) </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="mr-sm-2" for="inlineFormCustomSelectPref"><span class="h4">Question 4
                                    </span> <br/> You are almost never late and punctual</label>
                                <select class="custom-select mr-sm-2 scores" id="inlineFormCustomSelectPref">
                                    <option selected>Choose...</option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree) </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="mr-sm-2" for="inlineFormCustomSelectPref"><span class="h4">Question 5
                                    </span> <br/> You trust reason rather than feelings</label>
                                <select class="custom-select mr-sm-2 scores" id="inlineFormCustomSelectPref">
                                    <option selected>Choose...</option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree) </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="mr-sm-2" for="inlineFormCustomSelectPref"><span class="h4">Question 6
                                    </span> <br/> After prolonged socializing you feel you need to get away and be alone</label>
                                <select class="custom-select mr-sm-2 scores" id="inlineFormCustomSelectPref">
                                    <option selected>Choose...</option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree) </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="mr-sm-2" for="inlineFormCustomSelectPref"><span class="h4">Question 7
                                    </span> <br/> Often you prefer to read a book than go to a party</label>
                                <select class="custom-select mr-sm-2 scores" id="inlineFormCustomSelectPref">
                                    <option selected>Choose...</option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree) </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="mr-sm-2" for="inlineFormCustomSelectPref"><span class="h4">Question 8
                                    </span> <br/> When with a group of people, you enjoy being directly involved and being
                                    at the centre of attention</label>
                                <select class="custom-select mr-sm-2 scores" id="inlineFormCustomSelectPref">
                                    <option selected>Choose...</option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree) </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="mr-sm-2" for="inlineFormCustomSelectPref"><span class="h4">Question 9
                                    </span> <br/> When solving a problem you would rather follow a familiar approach than
                                    seek a new one</label>
                                <select class="custom-select mr-sm-2 scores" id="inlineFormCustomSelectPref">
                                    <option selected>Choose...</option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree) </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="mr-sm-2" for="inlineFormCustomSelectPref"><span class="h4">Question 10
                                    </span> <br/> You are always looking for opportunities</label>
                                <select class="custom-select mr-sm-2 scores" id="inlineFormCustomSelectPref">
                                    <option selected>Choose...</option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree) </option>
                                </select>
                            </div>

                            <button type="submit" class="btn btn-primary submit" data-toggle="modal" data-target="#myModal">Submit</button>
                            <!--Modal-->
                            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Best Match</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            ...
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                                        </div>
                                    </div>
                                </div>
                            </div>


                        </form>


                    </div>
                </div>
            </div>
        </div>


        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/nicolascueva/FriendFinder">Github
                        Repo
                    </a>
            </div>
        </footer>

    </div>

</body>

</html>


</body>

</html>


<script type="text/javascript">

    $(".submit").on("click", function (event) {
        event.preventDefault();
        // loop through .scores to parseInt them
        var scoreArray = [];
        var scores = $(".scores");
        for (let index = 0; index < scores.length; index++) {
            const score = scores[index];

            scoreArray.push(parseInt($(score).val()))

        }

        var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo_link").val().trim(),
            scores: scoreArray
        };


        console.log(newFriend);

        $.post("/api/friends", newFriend,
            function (data) {


                if (data) {
                    console.log(newFriend);
                    console.log(data);
                    console.log("New friend successfully added");

                }
                else {
                    alert("Please try your information again");
                }

                // Clear the form when submitting
                $("#name").val("");
                $("#photo_link").val("");
                $(".scores").val("");

                /* Pseudocode: Need to loop through the scoreArray of the new user and every user in the API. Comparing the value in each place.
                Maybe push the absolute values to a new array? Somehow compare the new arrays or just the end value and select the one with the least difference.
                Then I imagine we need to select the object that that least difference array belongs to and post the name and picture to the page in the modal.*/


            });
    });
</script>


<!--Bootstrap JQuery to enable the modal-->

<!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>-->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>